<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8"/>
    <link href="https://unpkg.com/ress/dist/ress.min.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="/js/member/event.js"></script>
    <link href="/css/member/style_.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500&family=Roboto:ital,wght@0,400;1,300&display=swap"
          rel="stylesheet">

    <link rel="icon" type="image/x-icon" sizes="16x16" href="/static_Image/common/main/favicon.ico">
    <link rel="stylesheet" href="/css/common/headerFooter.css"/>

</head>
<body>
<!-- common header -->
<div th:replace="common/header_white.html"></div>

<div id="reservation-history" class="myPageMain-container">

    <div class="left-navi"></div>

    <div class="myPageMainWrapper">
        <h2 class="mainTitle">지난 예약 조회</h2>
        <div class="nav-line"></div>

        <table align="center" class="reserve-table">
            <tr>
                <th class="col1">예약 코드</th>
                <th class="col2">예약 일자</th>
                <th class="col3">돌봄 대상</th>
                <th class="col4">펫시터</th>
                <th class="col5">후기 작성</th>
            </tr>
            <tr th:if="${#lists.isEmpty(list)}">
                <td colspan="5">예약 결과가 존재하지 않습니다. 펫밀리의 서비스를 이용해보세요!</td>
            </tr>
            <tr th:each="reserve : ${reserveList}" th:unless="${#lists.isEmpty(list)}">
                <td class="col1" th:text="${reserve.reserveCode.예약코드}"></td>
                <td class="col2" th:text="${reserve.reserveCode.예약일자}"></td>
                <td class="col3" th:text="${reserve.reserveCode.돌봄대상}"></td>
                <td class="col4" th:text="${reserve.reserveCode.펫시터}"></td>
                <td class="col5"><span th:if="${reserve.reserveCode.예약상태 == '완료'}">
                    <a href="#" th:href="'/member/review-write?no=' + ${reserve.reserveCode.예약코드}">후기 작성</a>
                </span></td>
                <td class="col5" th:if="${reserve.reserveCode.예약상태 == '취소'}">예약취소</td>
            </tr>
        </table>

        <!-- 페이징 바 -->
        <div id="paging" align="center" style="margin-top: 20px;">

            <!-- 맨 앞으로 이동 -->
            <button
                    th:onclick="'location.href=\'/member/reserve-history?page=1&searchCondition=' + @{${paging.searchCondition}} + '&searchValue=' + @{${paging.searchValue}} + '\''">&lt;&lt;</button>
            <!-- \:URL이 구성 될 javascript 문자열의 시작 + @{}:Thymeleaf표현식, ${}:Thymeleaf변수로 값들이 URL문자열로 연결 + \자스 문자열 닫음 -->
            <!-- "온클릭 속성 '문자열? \자스 -->

            <!-- 이전 페이지로 이동 -->
            <button
                    th:onclick="'location.href=\'/member/reserve-history?page=' + @{${paging.page - 1}} + '&searchCondition=' + @{${paging.searchCondition}} + '&searchValue=' + @{${paging.searchValue}} + '\''"
                    th:disabled="${ paging.page <= 1 }">&lt;</button>

            <!-- 숫자 버튼 -->
            <th:block
                    th:each="page : ${ #numbers.sequence(paging.startPage, paging.endPage)}">
                <button
                        th:onclick="'location.href=\'/member/reserve-history?page=' + @{${page}} + '&searchCondition=' + @{${paging.searchCondition}} + '&searchValue=' + @{${paging.searchValue}} + '\''"
                        th:text="${ page }" th:disabled="${ paging.page eq page }">
                </button>
            </th:block>

            <!-- 다음 페이지로 이동 -->
            <button
                    th:onclick="'location.href=\'/member/reserve-history?page=' + @{${paging.page + 1}} + '&searchCondition=' + @{${paging.searchCondition}} + '&searchValue=' + @{${paging.searchValue}} + '\''"
                    th:disabled="${ paging.page >= paging.maxPage }">></button>

            <!-- 맨 끝으로 이동 -->
            <button
                    th:onclick="'location.href=\'/member/reserve-history?page=' + @{${paging.maxPage}} + '&searchCondition=' + @{${paging.searchCondition}} + '&searchValue=' + @{${paging.searchValue}} + '\''">>></button>

            </th:block>
        </div>

    </div>
</div>

<!-- common footer -->
<div th:replace="common/footer.html"></div>
</body>
</html>
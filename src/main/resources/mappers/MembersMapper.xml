<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mypet.petmily.admin.member.dao.MembersMapper">

    <resultMap type="com.mypet.petmily.member.dto.MemberDTO" id="generalMemberResultMap">
        <id property="memberNo" column="MEMBER_NO"/>
        <result property="memberId" column="MEMBER_ID"/>
        <result property="memberName" column="MEMBER_NAME"/>
        <result property="memberStat" column="MEMBER_STAT"/>
        <result property="registDate" column="REGIST_DATE"/>
        <collection property="memberCode" resultMap="authorityResultMap"/>
    </resultMap>

    <resultMap type="com.mypet.petmily.member.dto.AuthorityDTO" id="authorityResultMap">
        <id property="code" column="AUTHORITY_CODE"/>
        <result property="name" column="AUTHORITY_NAME"/>
        <result property="desc" column="AUTHORITY_DESC"/>
    </resultMap>


<!--     회원 목록 조회 쿼리-->
    <select id="selectMemberList" resultMap="generalMemberResultMap">
        SELECT
              A.MEMBER_NO
             ,A.MEMBER_ID
             ,A.MEMBER_NAME
             ,B.AUTHORITY_CODE
             ,A.MEMBER_STAT
             ,A.REGIST_DATE
        FROM TBL_MEMBER A
        JOIN TBL_ROLE B ON (A.MEMBER_NO = B.MEMBER_NO)
        ORDER BY 1 DESC
    </select>



</mapper>
